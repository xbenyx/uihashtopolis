<!-- <div *ngIf="isLoading" style="text-align: center;">
  <app-loading-spinner></app-loading-spinner>
</div> -->
<!-- header -->
<app-page-title [title]="pTitle" [subbutton]="subbutton"></app-page-title>
<!-- Edit Hashlist -->
<grid-main [class]="'fmxw-700'">
  <form [formGroup]="updateForm" (ngSubmit)="onSubmit()">
    <div class="row">
      <grid-form-input [name]="'ID'">
        <input
              type='text'
              id='hashlistId'
              class='form-control'
              formControlName="hashlistId"
        >
      </grid-form-input>
      <div formGroupName="updateData">
        <grid-form-input [name]="'Name'">
          <input
                type='text'
                id='name'
                class='form-control'
                formControlName="name"
          >
        </grid-form-input>
        <grid-form-input [name]="'Notes'">
          <textarea
                  id='notes'
                  class='form-control'
                  formControlName="notes"
            >
            </textarea>
        </grid-form-input>
        <div class="row g-3">
          <div class="col-md-2">
            <grid-form-input [name]="'Secret'" [tooltip]="'Contains secret data'">
              <select
                      id='isSecret'
                      class='form-select'
                      formControlName="isSecret"
                  >
                  <option [ngValue]="false">No</option>
                  <option [ngValue]="true">Yes</option>
                </select>
            </grid-form-input>
          </div>
          <div class="col-md-10">
            <grid-form-input [name]="'Access Group'">
              <td>
                <select
                      id='accessGroupId'
                      class='form-select'
                      formControlName="accessGroupId"
                  >
                  <option *ngFor="let a of accessgroup"  [ngValue]="a.accessGroupId">{{ a.groupName }}</option>
                </select>
            </grid-form-input>
          </div>
        </div>
      </div>
      <hr>
      <grid-form-input [name]="'Hash Type'">
        <div *ngFor="let h of hashT" class="form-outline">
          <label class="form-label" for="getHashTypeId"></label>
          <span class="pre input-group-text input-group-lg">
            {{ h[0].description }}
          </span>
        </div>
      </grid-form-input>
      <div class="row">
        <div class="col">
          <grid-form-input [name]="'Using hashcat brain'">
            <input
                  type='text'
                  id='useBrain'
                  class='form-control'
                  formControlName="useBrain"
              >
          </grid-form-input>
        </div>
        <div class="col">
          <grid-form-input [name]="'Format'">
            <input
                  type='text'
                  id='format'
                  class='form-control'
                  formControlName="format"
              >
          </grid-form-input>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <grid-form-input [name]="'Hashes'">
            <input
                  type='number'
                  id='hashCount'
                  class='form-control'
                  formControlName="hashCount"
              >
          </grid-form-input>
        </div>
        <div class="col">
          <grid-form-input [name]="'Cracked'">
            <input
                  type='number'
                  id='cracked'
                  class='form-control'
                  formControlName="cracked"
              >
          </grid-form-input>
        </div>
        <div class="col">
          <grid-form-input [name]="'Remaining'">
            <input
                  type='number'
                  id='cracked'
                  class='form-control'
                  formControlName="remaining"
              >
          </grid-form-input>
        </div>
      </div>
    </div>
    <button-submit [name]="'Update'"></button-submit>
  </form>
</grid-main>
<!-- Table Cracking Hashlist -->
<app-table>
  <app-page-subtitle [subtitle]="'Tasks Cracking this hashlist'"></app-page-subtitle>
  <table class="table table-centered table-nowrap mb-0 rounded" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
    <thead class="thead-light">
      <tr>
          <th class="border-0 rounded-start">ID</th>
          <th class="border-0">Name</th>
          <th class="border-0">Dispatched</th>
          <th class="border-0">Searched</th>
          <th class="border-0 rounded-end">Cracked</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let t of alltasks">
        <td>
          <span [ngClass]="!t.color ? '' : 'pill-ebidem-tk'" [ngStyle]="{'background-color': t.color }">{{ t.taskId }}</span>
        </td>
        <td>
          {{ t.taskName }}
          <a class='btn-outline-gray-600 float-right' [routerLink]="['/tasks/show-tasks',t.taskId,'edit']" title="Show Task">
            <fa-icon [icon]="faEye" aria-hidden="true"></fa-icon>
          </a>
        </td>
        <td>{{ loadchunks | tdispatched:t.taskId:t.keyspace | percent}}</td>
        <td>{{ loadchunks | tdsearched:t.taskId:t.keyspace | percent}}</td>
        <td>
          {{ loadchunks | tdcracked:t.taskId }}
          <a class='btn-outline-gray-600 float-right' [routerLink]="['/hashlists/hashes/','tasks',t.taskId]" title="Show Hashes">
            <fa-icon [icon]="faEye" aria-hidden="true"></fa-icon>
          </a>
        </td>
      </tr>
    </tbody>
  </table>
</app-table>
